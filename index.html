<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ngUpload by twilson63</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">ngUpload</h1>
        <p class="header">An AngularJS Service for uploading files using iframe</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/twilson63/ngUpload/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/twilson63/ngUpload/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/twilson63/ngUpload">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/twilson63">twilson63</a></p>


      </header>
      <section>
        <h1>
<a name="ngupload" class="anchor" href="#ngupload"><span class="octicon octicon-link"></span></a>ngUpload</h1>

<p>An AngularJS file upload directive.  </p>

<h2>
<a name="0314---for-updates-see-changelogmd" class="anchor" href="#0314---for-updates-see-changelogmd"><span class="octicon octicon-link"></span></a>0.3.14 - for updates see CHANGELOG.md</h2>

<div class="highlight"><pre>   <span class="nt">&lt;form</span> <span class="na">ng-upload</span> <span class="na">action=</span><span class="s">"/upload-full-form"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;p&gt;</span>
           <span class="nt">&lt;label&gt;</span>Fullname:<span class="nt">&lt;/label&gt;</span>
           <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"fullname"</span> <span class="na">ng-model=</span><span class="s">"fullname"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;/p&gt;</span>
       <span class="nt">&lt;p&gt;</span>
           <span class="nt">&lt;label&gt;</span>Gender:<span class="nt">&lt;/label&gt;</span>
           <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"gender"</span> <span class="na">ng-model=</span><span class="s">"gender"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;/p&gt;</span>
       <span class="nt">&lt;p&gt;</span>
           <span class="nt">&lt;label&gt;</span>Favorite Color:<span class="nt">&lt;/label&gt;</span>
           <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"color"</span> <span class="na">ng-model=</span><span class="s">"color"</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;/p&gt;</span>
       <span class="nt">&lt;p&gt;</span>
           <span class="nt">&lt;label&gt;</span>Your picture (file will not be saved on the server):<span class="nt">&lt;/label&gt;</span>
           <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">"file"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;/p&gt;</span>
       <span class="nt">&lt;p&gt;</span>
           <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn"</span> <span class="na">value=</span><span class="s">"Submit"</span> 
             <span class="na">upload-submit=</span><span class="s">"uploadComplete(content, completed)"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;/p&gt;</span>
   <span class="nt">&lt;/form&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert alert-info"</span><span class="nt">&gt;</span>Server Response: {{response | json}}<span class="nt">&lt;/div&gt;</span>
   <span class="nt">&lt;div&gt;</span>
       Fullname: <span class="nt">&lt;b&gt;</span>{{response.fullname}}<span class="nt">&lt;/b&gt;&lt;br</span> <span class="nt">/&gt;</span>
       Gender: <span class="nt">&lt;b&gt;</span>{{response.gender}}<span class="nt">&lt;/b&gt;&lt;br</span> <span class="nt">/&gt;</span>
       Favourite Color: <span class="nt">&lt;span</span> <span class="na">ng-style=</span><span class="s">"response.style"</span><span class="nt">&gt;</span>{{response.color}}<span class="nt">&lt;/span&gt;&lt;br</span> <span class="nt">/&gt;</span>
       Picture: {{response.pictureUrl}}
   <span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>... and the context ngController's source is:</p>

<div class="highlight"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'Example5Ctrl'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">uploadComplete</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">completed</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">completed</span> <span class="o">&amp;&amp;</span> <span class="nx">content</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span> <span class="c1">// Presumed content is a json string!</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">color</span><span class="o">:</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">color</span><span class="p">,</span>
        <span class="s2">"font-weight"</span><span class="o">:</span> <span class="s2">"bold"</span>
      <span class="p">};</span>

      <span class="c1">// Clear form (reason for using the 'ng-model' directive on the input elements)</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">fullname</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
      <span class="c1">// Look for way to clear the input[type=file] element</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>
</pre></div>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>AngularJS (<a href="http://angularjs.org">http://angularjs.org</a>)</li>
<li>JQuery (<a href="http://jquery.org">http://jquery.org</a>)</li>
</ul><h2>
<a name="install-with-bower" class="anchor" href="#install-with-bower"><span class="octicon octicon-link"></span></a>Install with Bower</h2>

<pre><code>bower install ngUpload 
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Add to your html file</p>

<pre><code>&lt;script src="/js/ng-upload.js"&gt;&lt;/script&gt;
</code></pre>

<p>Create a basic form with a file input element</p>

<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">ng-app=</span><span class="s">"app"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"mainCtrl"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/uploads"</span> <span class="na">ng-upload</span><span class="nt">&gt;</span> 
     <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">"avatar"</span><span class="nt">&gt;&lt;/input&gt;</span>
     <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Upload"</span> 
       <span class="na">upload-submit=</span><span class="s">"results(content, completed)"</span><span class="nt">&gt;&lt;/input&gt;</span>
   <span class="nt">&lt;/form&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<h3>
<a name="some-rule-of-thumb" class="anchor" href="#some-rule-of-thumb"><span class="octicon octicon-link"></span></a>Some rule of thumb</h3>

<ul>
<li>Any html element that supports the click event can be used to submit the form marked with the <strong>ng-upload</strong> directive, as long as such elements are marked with the <strong>'upload-submit'</strong> directive.</li>
<li>Make sure you import the <strong>'ngUpload'</strong> module in your angularJS application.</li>
</ul><p>Applying this rules, the sample above can be re-written as</p>

<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">ng-app=</span><span class="s">"app"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"mainCtrl"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/uploads"</span> <span class="na">ng-upload</span><span class="nt">&gt;</span> 
     <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">"avatar"</span><span class="nt">&gt;&lt;/input&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">'cursor: pointer'</span> <span class="na">upload-submit=</span><span class="s">"results(content, completed)"</span><span class="nt">&gt;</span>Upload with Div<span class="nt">&lt;/div&gt;</span> <span class="ni">&amp;bull;</span>
   <span class="nt">&lt;/form&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>or</p>

<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">ng-app=</span><span class="s">"app"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"mainCtrl"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/uploads"</span> <span class="na">ng-upload</span><span class="nt">&gt;</span> 
     <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">"avatar"</span><span class="nt">&gt;&lt;/input&gt;</span>
     <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'javascript:void(0)'</span> 
       <span class="na">class=</span><span class="s">"upload-submit: results(contents, completed)"</span> <span class="nt">&gt;</span>
         Upload with Anchor<span class="nt">&lt;/a&gt;</span>
   <span class="nt">&lt;/form&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>where the form can be submit with a Div or Anchor html element.</p>

<p>The AngularJS controller for the above samples is given as:</p>

<div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngUpload'</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'mainCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">completed</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">completed</span> <span class="o">&amp;&amp;</span> <span class="nx">content</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span> <span class="c1">// process content</span>
      <span class="k">else</span>
      <span class="p">{</span>
        <span class="c1">// 1. ignore content and adjust your model to show/hide UI snippets; or</span>
        <span class="c1">// 2. show content as an _operation progress_ information</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h2>
<a name="directive-options" class="anchor" href="#directive-options"><span class="octicon octicon-link"></span></a>Directive Options</h2>

<h3>
<a name="ngupload-1" class="anchor" href="#ngupload-1"><span class="octicon octicon-link"></span></a>ngUpload</h3>

<ul>
<li>
<code>upload-options-rails-csrf</code>: Turns on support for <a href="http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf">Rails' CSRF</a> 
                           by adding a hidden form field with the csrf token.</li>
</ul><h3>
<a name="uploadsubmit" class="anchor" href="#uploadsubmit"><span class="octicon octicon-link"></span></a>uploadSubmit</h3>

<ul>
<li>
<code>upload-options-enable-controls</code>: Whether to enable the submit button when uploading forms.</li>
<li>
<code>upload-options-convert-hidden</code>: Set the value of hidden inputs to their <code>ng-model</code> attribute when the form is submitted.</li>
</ul><h2>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h2>

<p>Example of forms that posts to NodeJS server are now included under the <a href="https://github.com/twilson63/ngUpload/tree/master/examples">/examples</a> folder.</p>

<h2>
<a name="test" class="anchor" href="#test"><span class="octicon octicon-link"></span></a>Test</h2>

<p>Needs Chrome Installed.</p>

<div class="highlight"><pre>npm install
npm install testacular -g

testacular start
</pre></div>

<h2>
<a name="jshint" class="anchor" href="#jshint"><span class="octicon octicon-link"></span></a>jshint</h2>

<div class="highlight"><pre>npm install
npm install grunt-cli -g

grunt jshint
</pre></div>

<h2>
<a name="minify" class="anchor" href="#minify"><span class="octicon octicon-link"></span></a>Minify</h2>

<div class="highlight"><pre>npm install
npm install grunt-cli -g

grunt uglify
</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>MIT</p>

<h2>
<a name="how-to-contribute" class="anchor" href="#how-to-contribute"><span class="octicon octicon-link"></span></a>How to contribute</h2>

<p>pull requests welcome.</p>

<p>please use the following style guidelines</p>

<p>(<a href="http://nodeguide.com/style.html">http://nodeguide.com/style.html</a>)</p>

<h2>
<a name="contributors" class="anchor" href="#contributors"><span class="octicon octicon-link"></span></a>Contributors</h2>

<ul>
<li>ADEBISI Foluso A. (<a href="https://github.com/adebisi-fa">https://github.com/adebisi-fa</a>)</li>
<li>Hassan Alqaraguli (<a href="https://github.com/HassanAlqaraguli">https://github.com/HassanAlqaraguli</a>)</li>
<li>JÃ¸rgen Borgesen (<a href="https://github.com/jorgenfb">https://github.com/jorgenfb</a>)</li>
<li>cristianocd (<a href="https://github.com/cristianocd">https://github.com/cristianocd</a>)</li>
<li>Evgeniy Zatsepin (<a href="https://github.com/dizzy7">https://github.com/dizzy7</a>)</li>
<li>Chris Tesene (<a href="https://github.com/ctesene">https://github.com/ctesene</a>)</li>
<li>denyo (<a href="https://github.com/denyo">https://github.com/denyo</a>)</li>
<li>mguymon (<a href="https://github.com/mguymon">https://github.com/mguymon</a>)</li>
<li>marek-stoj (<a href="https://github.com/marek-stoj">https://github.com/marek-stoj</a>)</li>
</ul><h2>
<a name="thanks" class="anchor" href="#thanks"><span class="octicon octicon-link"></span></a>Thanks</h2>

<ul>
<li>AngularJS Team</li>
<li>NodeJS Team</li>
<li>JavaScript Team</li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>