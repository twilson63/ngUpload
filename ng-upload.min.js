angular.module("ngUpload",[]).directive("uploadSubmit",["$parse",function(t){return{restrict:"AC",link:function(a,e,n){var o={};o.enableControls=n.uploadOptionsEnableControls;var i=t(n.uploadSubmit);if(!angular.isFunction(i)){var r="The expression on the ngUpload directive does not point to a valid function.";throw r+"\n"}e.bind("click",function(){var t=angular.element("<iframe id='upload_iframe' name='upload_iframe' border='0' width='0' height='0' style='width: 0px; height: 0px; border: none; display: none' />");t.bind("load",function(){var n=t.contents().find("body").text();a.$apply(function(){i(a,{content:n,completed:!0})}),""!==n&&setTimeout(function(){t.remove()},250),e.attr("disabled",null),e.attr("title","Click to start upload.")}),a.uploadForm.parent().append(t),a.$apply(function(){i(a,{content:"Please wait...",completed:!1})});var n=!0;o.enableControls||(e.attr("disabled","disabled"),n=!1),e.attr("title",(n?"[ENABLED]: ":"[DISABLED]: ")+"Uploading, please wait..."),a.uploadForm.submit()}).attr("title","Click to start upload.")}}}]).directive("ngUpload",["$parse",function(){return{restrict:"AC",link:function(t,a){a.attr("target","upload_iframe"),a.attr("method","post"),a.attr("action",a.attr("action")+"?_t="+(new Date).getTime()),a.attr("enctype","multipart/form-data"),a.attr("encoding","multipart/form-data"),t.uploadForm=a}}}]);